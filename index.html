<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Ufak bir hediye diyelim">
    <meta name="github" content="https://github.com/hikmtwashere">
    <title>Helin' in DoÄŸum GÃ¼nÃ¼</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@400;600&display=swap"
        rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>
<body>
    <div id="wrapper">
        <div class="flag__birthday">
            <img src="./images/1.png" alt="" width="350" class="flag__left">
            <img src="./images/1.png" alt="" width="350" class="flag__right">
        </div>
        <div class="content">
            <div class="left">
                <div class="title">
                    <h1 class="happy">
                        <span style="--t: 4s;">Ä°</span>
                        <span style="--t: 4.2s;">y</span>
                        <span style="--t: 4.4s;">i</span>
                        <span style="--t: 4.5s;">&nbsp;</span>
                        <span style="--t: 4.6s;">k</span>
                        <span style="--t: 4.8s;">i</span>
                    </h1>
                    <h1 class="birthday">
                        <span style="--t: 5s;">D</span>
                        <span style="--t: 5.2s;">o</span>
                        <span style="--t: 5.4s;">ÄŸ</span>
                        <span style="--t: 5.6s;">d</span>
                        <span style="--t: 5.8s;">u</span>
                        <span style="--t: 6s;">n</span>

                    </h1>
                    <div class="hat">
                        <img src="./images/hat.png" alt="" width="130">
                    </div>
                </div>
                <div class="date__of__birth">
                    <span></span>
                </div>
                <div class="btn">
                    <button id="btn__letter">
                        <div class="mail">
                            Helin HanÄ±m LÃ¼tfen Buraya TÄ±klayÄ±nÄ±z
                            <i class="fa-regular fa-envelope"></i>
                        </div>
                    </button>
                    <button id="btn__confetti">
                        <div class="confetti-btn">
                            ğŸ‰ Konfeti Patlatmak Ä°Ã§in TÄ±kla!
                        </div>
                    </button>
                    <button id="btn__gallery">
                        <div class="gallery-btn">
                            ğŸ“¸ FotoÄŸraf Galerisi
                        </div>
                    </button>
                    <button id="btn__stars">
                        <div class="stars-btn">
                            â­ YÄ±ldÄ±zlarÄ± AktifleÅŸtir
                        </div>
                    </button>
                    <button id="btn__balloons">
                        <div class="balloons-btn">
                            ğŸˆ Balon Patlatma Oyunu
                        </div>
                    </button>
                    <button id="btn__candles">
                        <div class="candles-btn">
                            ğŸ•¯ï¸ Mum Ãœfleme
                        </div>
                    </button>
                </div>
            </div>
            <div class="right">
                <div class="box__account">
                    <div class="image">
                        <img src="./images/unnamed.png" alt="">
                    </div>
                    <div class="name">
                        <i class="fa-solid fa-heart"></i>
                        <span>Sevgili Helin</span>
                        <i class="fa-solid fa-heart"></i>
                    </div>
                    <div class="balloon_one">
                        <img width="100px" src="./images/balloon1.png" alt="">
                    </div>
                    <div class="balloon_two">
                        <img width="100px" src="./images/balloon2.png" alt="">
                    </div>
                </div>
                <div class="cricle">
                    <div class="text__cricle">
                        <span style="--i: 1;">Ä°</span>
                        <span style="--i: 2;">Y</span>
                        <span style="--i: 3;">Ä°</span>
                        <span style="--i: 4;">-</span>
                        <span style="--i: 5;">K</span>
                        <span style="--i: 6;">Ä°</span>
                        <span style="--i: 7;">-</span>
                        <span style="--i: 8;">V</span>
                        <span style="--i: 9;">A</span>
                        <span style="--i: 10;">R</span>
                        <span style="--i: 11;">S</span>
                        <span style="--i: 12;">I</span>
                        <span style="--i: 13;">N</span>

                    </div>
                    <i class="fa-solid fa-heart"></i>
                </div>
            </div>
        </div>
        <div class="decorate_star star1" style="--t: 15s;"></div>
        <div class="decorate_star star2" style="--t: 15.2s;"></div>
        <div class="decorate_star star3" style="--t: 15.4s;"></div>
        <div class="decorate_star star4" style="--t: 15.6s;"></div>
        <div class="decorate_star star5" style="--t: 15.8s;"></div>
        <div class="decorate_flower--one" style="--t: 15s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_flower--two" style="--t: 15.3s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_flower--three" style="--t: 15.6s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_bottom">
            <img src="./images/decorate.png" alt="" width="100">
        </div>
        <div class="smiley__icon">
            <img src="./images/smiley_icon.png" alt="" width="100">
        </div>


        <div class="boxMail">
            <i class="fa-solid fa-xmark"></i>
            <div class="boxMail-container">
                <div class="card1">

                    <div class="userImg">
                        <img src="images/unnamed.png" alt="">
                    </div>
                    <h4 class="username">Helin'e ğŸ’–<span class="underline"></span></h4>

                    <h3>Ä°YÄ° KÄ° DOÄMUÅSUN FISTIK</h3>
                    <div class="imageCute">
                        <img src="cute1.png" alt="">
                    </div>
                </div>
                <div class="card2">
                    <div class="card2-content">
                        <h3>Helin'e !</h3>
                        <h2>
                            BugÃ¼n 1.72, komik, gÃ¶zleri gÃ¼zel, gÃ¼lÃ¼ÅŸÃ¼ gÃ¼zel, cÄ±vÄ±l cÄ±vÄ±l, neÅŸeli, sevgi dolu, sevgilimin doÄŸum gÃ¼nÃ¼.     
                        Ä°yi ki tanÄ±ÅŸmÄ±ÅŸÄ±z, iyi ki hayatÄ±mdasÄ±n, iyi ki sevgilimsin.
                        KeÅŸke bugÃ¼n yanÄ±nda olabilseydim ve bu gÃ¼nÃ¼ birlikte kutlayabilseydik. (Muhtemelen yine yaÄŸmur yaÄŸardÄ± ama olsun.)
                        Ama biliyorum ki mesafeler kalplere engel deÄŸil.
                        Senin iÃ§in bÃ¶yle ufak bir hediye hazÄ±rladÄ±m umarÄ±m beÄŸenirsin.
                        Seni Ã§ok seviyorum, iyi ki doÄŸmuÅŸsun fÄ±stÄ±ÄŸÄ±m. ğŸ‚
                        </h2>

                        <div class="imageCute2">
                            <img src="cute2.png" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <audio id="birthday-music" src="birthday.mp3" loop></audio>
        
        <!-- Balon Patlatma Oyunu -->
        <div id="balloon-game" style="display: none;">
            <div class="game-header">
                <h2>ğŸˆ Balon Patlatma Oyunu (GÃ¼ncellenicek)</h2>
                <div class="game-score">Skor: <span id="score">0</span></div>
                <button id="close-game">âŒ</button>
            </div>
            <div class="game-area" id="game-area">
                <!-- Balonlar dinamik olarak buraya eklenecek -->
            </div>
        </div>

        <!-- Mum Ãœfleme Oyunu -->
        <div id="candle-game" style="display: none;">
            <div class="candle-header">
                <h2>ğŸ•¯ï¸ Mum Ãœfleme Oyunu</h2>
                <p>Mikrofonunuza Ã¼fleyin ve mumlarÄ± sÃ¶ndÃ¼rÃ¼n!</p>
                <button id="close-candles">âŒ</button>
            </div>
            <div class="candle-area">
                <div class="birthday-cake">
                    ğŸ‚
                    <div class="candles-container">
                        <div class="candle active" data-candle="1">ğŸ•¯ï¸</div>
                        <div class="candle active" data-candle="2">ğŸ•¯ï¸</div>
                        <div class="candle active" data-candle="3">ğŸ•¯ï¸</div>
                        <div class="candle active" data-candle="4">ğŸ•¯ï¸</div>
                        <div class="candle active" data-candle="5">ğŸ•¯ï¸</div>
                    </div>
                </div>
                <div class="blow-instruction">
                    <p id="candle-status">5 mum yanÄ±yor - hepsini sÃ¶ndÃ¼rÃ¼n!</p>
                    <div class="volume-indicator">
                        <div class="volume-bar" id="volume-bar"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="music-player" class="music-player" style="display: none;">
            <div class="music-controls">
                <span class="music-title">ğŸµ DoÄŸum GÃ¼nÃ¼ MÃ¼ziÄŸi</span>
                <button id="play-pause-btn">â–¶ï¸</button>
                <button id="stop-btn">â¹ï¸</button>
                <div class="volume-control">
                    <span>ğŸ”Š</span>
                    <input type="range" id="volume-slider" min="0" max="100" value="50">
                </div>
            </div>
        </div>

        <div id="gallery-modal" class="gallery-modal" style="display: none;">
            <div class="gallery-content">
                <h2 class="gallery-title">FotoÄŸraf Galerisi</h2>
                <span class="gallery-close">&times;</span>
                <div class="gallery-container">
                    <div class="gallery-slides">
                        <div class="gallery-slide active">
                            <img src="images/image1.png" alt="Sevgili Helin">
                            <p>Nice</p>
                        </div>
                        <div class="gallery-slide">
                            <img src="images/image2.png" alt="Kalp">
                            <p>Beraber</p>
                        </div>
                        <div class="gallery-slide">
                            <img src="images/image3.png" alt="AÅŸk">
                            <p>Senelere</p>
                            </div>
                        <div class="gallery-slide">
                            <img src="images/image4.png" alt="AÅŸk">
                            <p>ğŸ¤ </p>
                        </div>
                    </div>
                </div>
                <div class="gallery-nav">
                    <button class="gallery-prev">â®</button>
                    <span class="gallery-counter">1 / 3</span>
                    <button class="gallery-next">â¯</button>
                </div>
            </div>
        </div>
    </div>
<div id="music-toggle" class="music-toggle">
    <button id="music-btn">â¸ï¸</button>
</div>
</body>
<script>
    let datetxt = "15 Temmuz 2003";
    let datatxtletter = "My love. You are a very special girl. I always silently thank you for coming into my life. Today, I wish you all the best, lots of health, and lots of joy. I always hope we will celebrate many more birthdays like this together. Happy birthday to you.ğŸ’•";
    let titleLetter = "Helinim'e!";
    let charArrDate = datetxt.split('');
    let charArrDateLetter = datatxtletter.split('');
    let charArrTitle = titleLetter.split('');
    let currentIndex = 0;
    let currentIndexLetter = 0;
    let currentIndexTitle = 0;
    let date__of__birth = document.querySelector(".date__of__birth span");
    let text__letter = document.querySelector(".text__letter p");
    setTimeout(function () {
        timeDatetxt = setInterval(function () {
            if (currentIndex < charArrDate.length) {
                date__of__birth.textContent += charArrDate[currentIndex];
                currentIndex++;
            }
            else {
                let i = document.createElement("i");
                i.className = "fa-solid fa-star"
                document.querySelector(".date__of__birth").prepend(i)
                document.querySelector(".date__of__birth").appendChild(i.cloneNode(true))
                clearInterval(timeDatetxt)
            }
        }, 100)
    }, 12000)

    var intervalContent;
    var intervalTitle;
    $("#btn__letter").on("click", function () {
        $(".box__letter").slideDown()
        setTimeout(function () {
            $(".letter__border").slideDown();
        }, 1000)
        setTimeout(function () {
            intervalTitle = setInterval(function () {
                if (currentIndexTitle < charArrTitle.length) {
                    document.querySelector(".title__letter").textContent += charArrTitle[currentIndexTitle];
                    let i = document.createElement("i");
                    i.className = "fa-solid fa-heart"
                    document.querySelector(".title__letter").appendChild(i)
                    currentIndexTitle++;
                }
                else {
                    clearInterval(intervalTitle)
                }
            }, 100)
        }, 2000)
        setTimeout(function () {
            document.querySelector("#heart__letter").classList.add("animationOp");
            document.querySelector(".love__img").classList.add("animationOp");
            document.querySelector("#mewmew").classList.add("animationOp");
        }, 2800)
        setTimeout(function () {
            document.querySelectorAll(".heart").forEach((item) => {
                item.classList.add("animation")
            })
        }, 3500)
        setTimeout(function () {
            intervalContent = setInterval(function () {
                if (currentIndexLetter < charArrDateLetter.length) {
                    text__letter.textContent += charArrDateLetter[currentIndexLetter];
                    currentIndexLetter++;
                }
                else {
                    clearInterval(intervalContent)
                }
            }, 50)
        }, 6000)
    })
    $(".close").on("click", function () {
        clearInterval(intervalContent)
        document.querySelector(".title__letter").textContent = "";
        text__letter.textContent = "";
        currentIndexLetter = 0
        currentIndexTitle = 0
        document.querySelector("#heart__letter").classList.remove("animationOp");
        document.querySelector(".love__img").classList.remove("animationOp");
        document.querySelector("#mewmew").classList.remove("animationOp");
        document.querySelectorAll(".heart").forEach((item) => {
            item.classList.remove("animation")
        })
        $(".box__letter").slideUp();
        $(".letter__border").slideUp();
    })



    let mailBox = document.querySelector('.mail')
    let boxmail = document.querySelector('.boxMail')
    var close = document.querySelector('.fa-xmark')
    mailBox.onclick = function () {
        mailBox.classList.toggle('active')
        boxmail.classList.add('active')
    }

    close.addEventListener('click', function () {
        boxmail.classList.remove('active')
    })

    // Konfeti butonu
    document.getElementById('btn__confetti').addEventListener('click', function() {
        createConfetti();
    });

    function createConfetti() {
        const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#f0932b', '#eb4d4b', '#6c5ce7', '#a29bfe'];

        for (let i = 0; i < 50; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti-piece';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.left = Math.random() * 100 + '%';
            confetti.style.animationDelay = Math.random() * 3 + 's';
            confetti.style.animationDuration = Math.random() * 2 + 3 + 's';
            confetti.style.animation = 'confetti-fall ' + (Math.random() * 2 + 3) + 's linear forwards';

            document.body.appendChild(confetti);

            setTimeout(() => {
                confetti.remove();
            }, 5000);
        }
    }

    // MÃ¼zik kullanÄ±cÄ± etkileÅŸimi ile baÅŸlat
    const music = document.getElementById('birthday-music');
    let musicStarted = false;
    
    // Herhangi bir butona tÄ±klandÄ±ÄŸÄ±nda mÃ¼ziÄŸi baÅŸlat
    document.addEventListener('click', function() {
        if (!musicStarted) {
            music.play().catch(e => {
                console.log('MÃ¼zik Ã§alma hatasÄ±:', e);
            });
            musicStarted = true;
        }
    });

    // FotoÄŸraf galerisi fonksiyonlarÄ±
    const galleryModal = document.getElementById('gallery-modal');
    const galleryClose = document.querySelector('.gallery-close');
    const gallerySlides = document.querySelectorAll('.gallery-slide');
    const galleryPrev = document.querySelector('.gallery-prev');
    const galleryNext = document.querySelector('.gallery-next');
    const galleryCounter = document.querySelector('.gallery-counter');
    let currentSlide = 0;

    document.getElementById('btn__gallery').addEventListener('click', function() {
        galleryModal.style.display = 'block';
        showSlide(0);
    });

    galleryClose.addEventListener('click', function() {
        galleryModal.style.display = 'none';
    });

    galleryPrev.addEventListener('click', function() {
        currentSlide = currentSlide > 0 ? currentSlide - 1 : gallerySlides.length - 1;
        showSlide(currentSlide);
    });

    galleryNext.addEventListener('click', function() {
        currentSlide = currentSlide < gallerySlides.length - 1 ? currentSlide + 1 : 0;
        showSlide(currentSlide);
    });

    function showSlide(index) {
        gallerySlides.forEach(slide => slide.classList.remove('active'));
        gallerySlides[index].classList.add('active');
        galleryCounter.textContent = `${index + 1} / ${gallerySlides.length}`;
    }

    // TÄ±klanabilir yÄ±ldÄ±zlar
    let starsActive = false;
    document.getElementById('btn__stars').addEventListener('click', function() {
        starsActive = !starsActive;
        const stars = document.querySelectorAll('.decorate_star');
        const btn = document.getElementById('btn__stars');

        if (starsActive) {
            btn.querySelector('.stars-btn').textContent = 'â­ YÄ±ldÄ±zlarÄ± Kapat';
            stars.forEach(star => {
                star.style.cursor = 'pointer';
                star.addEventListener('click', handleStarClick);
            });
        } else {
            btn.querySelector('.stars-btn').textContent = 'â­ YÄ±ldÄ±zlarÄ± AktifleÅŸtir';
            stars.forEach(star => {
                star.style.cursor = 'default';
                star.removeEventListener('click', handleStarClick);
            });
        }
    });

    function handleStarClick(e) {
        const star = e.target;
        star.style.backgroundColor = getRandomColor();
        star.style.transform = 'scale(1.5)';

        // ParÄ±ltÄ± efekti
        const sparkle = document.createElement('div');
        sparkle.className = 'sparkle-effect';
        sparkle.style.left = e.pageX + 'px';
        sparkle.style.top = e.pageY + 'px';
        document.body.appendChild(sparkle);

        setTimeout(() => {
            star.style.transform = 'scale(1)';
            sparkle.remove();
        }, 300);
    }

    function getRandomColor() {
        const colors = ['#FFD700', '#FF6B35', '#FF1744', '#E91E63', '#9C27B0', '#673AB7', '#3F51B5', '#2196F3'];
        return colors[Math.floor(Math.random() * colors.length)];
    }

    // Balon Patlatma Oyunu
    let gameScore = 0;
    let gameActive = false;
    let balloonCount = 0;
    let gameInterval;

    document.getElementById('btn__balloons').addEventListener('click', function() {
        startBalloonGame();
    });

    document.getElementById('close-game').addEventListener('click', function() {
        endBalloonGame();
    });

    function startBalloonGame() {
        document.getElementById('balloon-game').style.display = 'block';
        gameActive = true;
        gameScore = 0;
        balloonCount = 0;
        document.getElementById('score').textContent = gameScore;
        
        // Her 2 saniyede bir balon oluÅŸtur
        gameInterval = setInterval(createBalloon, 1000);
        
        // 30 saniye sonra oyunu bitir
        setTimeout(() => {
            if (gameActive) {
                endBalloonGame();
                alert('Tebrikler Helincik! Final skorunuz: ' + gameScore);
            }
        }, 15000);
    }

    function createBalloon() {
        if (!gameActive) return;
        
        const gameArea = document.getElementById('game-area');
        const balloon = document.createElement('div');
        balloon.className = 'game-balloon';
        balloon.innerHTML = 'ğŸˆ';
        
        // Rastgele pozisyon
        balloon.style.left = Math.random() * (gameArea.offsetWidth - 50) + 'px';
        balloon.style.top = Math.random() * (gameArea.offsetHeight - 50) + 'px';
        
        // Rastgele renk filtresi
        const colors = ['hue-rotate(0deg)', 'hue-rotate(60deg)', 'hue-rotate(120deg)', 'hue-rotate(180deg)', 'hue-rotate(240deg)', 'hue-rotate(300deg)'];
        balloon.style.filter = colors[Math.floor(Math.random() * colors.length)];
        
        balloon.addEventListener('click', function() {
            popBalloon(balloon);
        });
        
        gameArea.appendChild(balloon);
        balloonCount++;
        
        // 5 saniye sonra balonun kendini yok etmesi
        setTimeout(() => {
            if (balloon.parentNode) {
                balloon.remove();
                balloonCount--;
            }
        }, 5000);
    }

    function popBalloon(balloon) {
        gameScore += 10;
        document.getElementById('score').textContent = gameScore;
        
        // Patlama efekti
        balloon.innerHTML = 'ğŸ’¥';
        balloon.style.transform = 'scale(1.5)';
        balloon.style.filter = 'none';
        
        setTimeout(() => {
            balloon.remove();
            balloonCount--;
        }, 200);
        
        // Konfeti efekti
        createMiniConfetti(balloon.offsetLeft, balloon.offsetTop);
    }

    function createMiniConfetti(x, y) {
        const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24'];
        
        for (let i = 0; i < 8; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'mini-confetti';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.left = x + 'px';
            confetti.style.top = y + 'px';
            confetti.style.animation = 'mini-confetti-burst 0.6s ease-out forwards';
            
            document.body.appendChild(confetti);
            
            setTimeout(() => {
                confetti.remove();
            }, 600);
        }
    }

    function endBalloonGame() {
        gameActive = false;
        clearInterval(gameInterval);
        document.getElementById('balloon-game').style.display = 'none';
        
        // TÃ¼m balonlarÄ± temizle
        const balloons = document.querySelectorAll('.game-balloon');
        balloons.forEach(balloon => balloon.remove());
    }

    // Mum Ãœfleme Oyunu
    let micStream = null;
    let audioContext = null;
    let analyser = null;
    let candlesLit = 5;

    document.getElementById('btn__candles').addEventListener('click', function() {
        startCandleGame();
    });

    document.getElementById('close-candles').addEventListener('click', function() {
        endCandleGame();
    });

    async function startCandleGame() {
        try {
            document.getElementById('candle-game').style.display = 'block';
            candlesLit = 5;
            
            // TÃ¼m mumlarÄ± yeniden yak
            document.querySelectorAll('.candle').forEach(candle => {
                candle.classList.add('active');
                candle.textContent = 'ğŸ•¯ï¸';
            });
            
            document.getElementById('candle-status').textContent = 'Dilek tut ve mumlarÄ± Ã¼fle!';

            // Mikrofon eriÅŸimi iste
            micStream = await navigator.mediaDevices.getUserMedia({ audio: true });
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const source = audioContext.createMediaStreamSource(micStream);
            analyser = audioContext.createAnalyser();
            analyser.fftSize = 256;
            source.connect(analyser);

            // Ses seviyesini sÃ¼rekli kontrol et
            monitorBlowing();
        } catch (err) {
            alert('Mikrofon eriÅŸimi gerekli! LÃ¼tfen mikrofon iznini verin.');
            console.error('Mikrofon eriÅŸimi hatasÄ±:', err);
        }
    }

    function monitorBlowing() {
        const dataArray = new Uint8Array(analyser.frequencyBinCount);
        
        function checkVolume() {
            if (!analyser) return;
            
            analyser.getByteFrequencyData(dataArray);
            const average = dataArray.reduce((a, b) => a + b) / dataArray.length;
            
            // Ses seviyesi gÃ¶stergesi
            const volumeBar = document.getElementById('volume-bar');
            volumeBar.style.width = Math.min(average * 2, 100) + '%';
            
            // EÄŸer ses yeterince yÃ¼ksekse mum sÃ¶ndÃ¼r
            if (average > 70 && candlesLit > 0) {
                blowOutCandle();
            }
            
            if (candlesLit > 0) {
                requestAnimationFrame(checkVolume);
            }
        }
        
        checkVolume();
    }

    function blowOutCandle() {
        const activeCandless = document.querySelectorAll('.candle.active');
        if (activeCandless.length > 0) {
            const randomCandle = activeCandless[Math.floor(Math.random() * activeCandless.length)];
            randomCandle.classList.remove('active');
            randomCandle.textContent = 'ğŸ’¨';
            candlesLit--;
            
            // Konfeti efekti
            createMiniConfetti(randomCandle.offsetLeft + 250, randomCandle.offsetTop + 100);
            
            if (candlesLit === 0) {
                document.getElementById('candle-status').textContent = 'ğŸ‰ Tebrikler! TÃ¼m mumlarÄ± sÃ¶ndÃ¼rdÃ¼nÃ¼z!';
                setTimeout(() => {
                    createConfetti();
                    alert('ğŸ‚ DoÄŸum gÃ¼nÃ¼n kutlu olsun yeniden! Ne dilediysen artÄ±k gerÃ§ek olur inÅŸ! ğŸ‰');
                }, 1000);
            } else {
                document.getElementById('candle-status').textContent = `${candlesLit} mum daha yanÄ±yor!`;
            }
        }
    }

    function endCandleGame() {
        document.getElementById('candle-game').style.display = 'none';
        
        // Mikrofon akÄ±ÅŸÄ±nÄ± kapat
        if (micStream) {
            micStream.getTracks().forEach(track => track.stop());
            micStream = null;
        }
        
        // Audio context'i kapat
        if (audioContext) {
            audioContext.close();
            audioContext = null;
            analyser = null;
        }
        
        candlesLit = 0;
    }
    // MÃ¼zik kontrol butonu
const music = document.getElementById("birthday-music");
const musicBtn = document.getElementById("music-btn");
const musicToggle = document.getElementById("music-toggle");
let musicStarted = false;

// Sayfa yÃ¼klendiÄŸinde butonu gÃ¶ster
window.addEventListener("load", () => {
    musicToggle.style.display = "block";
});

// Ä°lk tÄ±klamada mÃ¼ziÄŸi baÅŸlat
document.addEventListener("click", () => {
    if (!musicStarted) {
        music.play().catch(e => console.warn("MÃ¼zik hatasÄ±:", e));
        musicStarted = true;
    }
});

// Butona basÄ±nca durdur/baÅŸlat
musicBtn.addEventListener("click", () => {
    if (music.paused) {
        music.play();
        musicBtn.textContent = "â¸ï¸";
    } else {
        music.pause();
        musicBtn.textContent = "â–¶ï¸";
    }
});
});
</script>

</html>
